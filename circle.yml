machine:
  xcode:
    xcode: 9.0

dependencies:
  pre:
    - brew update
    - brew install qt5 gsl lzo jpeg libpng libsndfile tree
    - echo 'export QTDIR="/usr/local/opt/qt5"' >> ~/.bash_profile
    - echo 'export PATH="$QTDIR/bin:$PATH"' >> ~/.bash_profile
    - echo 'export LDFLAGS="-L$QTDIR/lib $LDFLAGS"' >> ~/.bash_profile
    - echo 'export CPPFLAGS="-I$QTDIR/include $CPPFLAGS"' >> ~/.bash_profile

compile:
  override:
    - cmake --verbose=1 -DUSE_GAMEPAD=1 -G "Xcode" mandelbulber2/cmake/
#    - xcodebuild -project mandelbulber2.xcodeproj
#    - macdeployqt mandelbulber2.app -dmg
    - tree .

general:
  artifacts:
    - circle.yml
